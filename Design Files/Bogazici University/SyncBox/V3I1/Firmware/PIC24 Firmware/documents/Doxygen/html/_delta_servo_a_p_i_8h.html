<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Syncbox Firmware: DeltaServoAPI.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="bu.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Syncbox Firmware
   &#160;<span id="projectnumber">0.5</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">DeltaServoAPI.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>API for communicating with x-ray arm transform motor.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="_types_8h_source.html">Types.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_connection_map_8h_source.html">ConnectionMap.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for DeltaServoAPI.h:</div>
<div class="dyncontent">
<div class="center"><img src="_delta_servo_a_p_i_8h__incl.png" border="0" usemap="#_delta_servo_a_p_i_8h" alt=""/></div>
<map name="_delta_servo_a_p_i_8h" id="_delta_servo_a_p_i_8h">
<area shape="rect" id="node2" href="_types_8h.html" title="global types ar defined here. These types are used to simplify the code clearance. " alt="" coords="5,80,73,107"/>
<area shape="rect" id="node3" href="_connection_map_8h.html" title="ConnectionMap.h" alt="" coords="98,80,221,107"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="_delta_servo_a_p_i_8h__dep__incl.png" border="0" usemap="#_delta_servo_a_p_i_8hdep" alt=""/></div>
<map name="_delta_servo_a_p_i_8hdep" id="_delta_servo_a_p_i_8hdep">
<area shape="rect" id="node2" href="_instrument_8c.html" title="implement instrument " alt="" coords="16,80,111,107"/>
</map>
</div>
</div>
<p><a href="_delta_servo_a_p_i_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1be24a1b6189ea6e9161c93c400770ae"><td class="memItemLeft" align="right" valign="top"><a id="a1be24a1b6189ea6e9161c93c400770ae"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_delta_servo_a_p_i_8h.html#a1be24a1b6189ea6e9161c93c400770ae">TurnOnSliderMotor</a> ()</td></tr>
<tr class="memdesc:a1be24a1b6189ea6e9161c93c400770ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">turn on slider motor on. <br /></td></tr>
<tr class="separator:a1be24a1b6189ea6e9161c93c400770ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81608561a43bf2a44671ad65c2b3311c"><td class="memItemLeft" align="right" valign="top"><a id="a81608561a43bf2a44671ad65c2b3311c"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_delta_servo_a_p_i_8h.html#a81608561a43bf2a44671ad65c2b3311c">TurnOffSliderMotor</a> ()</td></tr>
<tr class="memdesc:a81608561a43bf2a44671ad65c2b3311c"><td class="mdescLeft">&#160;</td><td class="mdescRight">turn off slider motor on. <br /></td></tr>
<tr class="separator:a81608561a43bf2a44671ad65c2b3311c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7796779a0cfc1087d269785a1ae10427"><td class="memItemLeft" align="right" valign="top"><a id="a7796779a0cfc1087d269785a1ae10427"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_delta_servo_a_p_i_8h.html#a7796779a0cfc1087d269785a1ae10427">SetSliderMotorSpeed</a> (int)</td></tr>
<tr class="memdesc:a7796779a0cfc1087d269785a1ae10427"><td class="mdescLeft">&#160;</td><td class="mdescRight">set slider motor speed. <br /></td></tr>
<tr class="separator:a7796779a0cfc1087d269785a1ae10427"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb5100c2ce2b491dee220607b0f3ba0b"><td class="memItemLeft" align="right" valign="top"><a id="afb5100c2ce2b491dee220607b0f3ba0b"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_delta_servo_a_p_i_8h.html#afb5100c2ce2b491dee220607b0f3ba0b">RotateSliderMotorCounterClockwise</a> ()</td></tr>
<tr class="memdesc:afb5100c2ce2b491dee220607b0f3ba0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">start slider motor to rotate counter clockwise. <br /></td></tr>
<tr class="separator:afb5100c2ce2b491dee220607b0f3ba0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1717f9911c674bf81afee0b513f6de37"><td class="memItemLeft" align="right" valign="top"><a id="a1717f9911c674bf81afee0b513f6de37"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_delta_servo_a_p_i_8h.html#a1717f9911c674bf81afee0b513f6de37">RotateSliderMotorClockwise</a> ()</td></tr>
<tr class="memdesc:a1717f9911c674bf81afee0b513f6de37"><td class="mdescLeft">&#160;</td><td class="mdescRight">start slider motor to rotate clockwise. <br /></td></tr>
<tr class="separator:a1717f9911c674bf81afee0b513f6de37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91a5f8567f150810290d2fcce6cc8d32"><td class="memItemLeft" align="right" valign="top"><a id="a91a5f8567f150810290d2fcce6cc8d32"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_delta_servo_a_p_i_8h.html#a91a5f8567f150810290d2fcce6cc8d32">StopMotor</a> ()</td></tr>
<tr class="memdesc:a91a5f8567f150810290d2fcce6cc8d32"><td class="mdescLeft">&#160;</td><td class="mdescRight">stop slider motor. <br /></td></tr>
<tr class="separator:a91a5f8567f150810290d2fcce6cc8d32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae05447da479a74ce40ed44df1c83c20d"><td class="memItemLeft" align="right" valign="top"><a id="ae05447da479a74ce40ed44df1c83c20d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>ActuatorProcessKernelFrame</b> (<a class="el" href="struct_k_e_r_n_e_l___f_r_a_m_e.html">KERNEL_FRAME</a>)</td></tr>
<tr class="separator:ae05447da479a74ce40ed44df1c83c20d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a70a2c25b73b13884d92616c782f30f4e"><td class="memItemLeft" align="right" valign="top"><a id="a70a2c25b73b13884d92616c782f30f4e"></a>
const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_delta_servo_a_p_i_8h.html#a70a2c25b73b13884d92616c782f30f4e">MIN_MOTOR_JOG</a></td></tr>
<tr class="memdesc:a70a2c25b73b13884d92616c782f30f4e"><td class="mdescLeft">&#160;</td><td class="mdescRight">define minimum motor jog. <br /></td></tr>
<tr class="separator:a70a2c25b73b13884d92616c782f30f4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0faedf55ff9b2ec1ec564cb197ca5838"><td class="memItemLeft" align="right" valign="top"><a id="a0faedf55ff9b2ec1ec564cb197ca5838"></a>
const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_delta_servo_a_p_i_8h.html#a0faedf55ff9b2ec1ec564cb197ca5838">MAX_MOTOR_JOG</a></td></tr>
<tr class="memdesc:a0faedf55ff9b2ec1ec564cb197ca5838"><td class="mdescLeft">&#160;</td><td class="mdescRight">define maximum motor jog. <br /></td></tr>
<tr class="separator:a0faedf55ff9b2ec1ec564cb197ca5838"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>API for communicating with x-ray arm transform motor. </p>
<p>The table top arm motor is drived by DeltaB2 driver and this API controls that. The driver supports Modbus RTU for communication. Instead of complete Modebus RTU protocol implementation, this API sends protocol-compatible packets to the DeltaB2. <br />
 In order to find out the commands, first, the servo driver is connected to a PC on which ASDA soft version 5.3 ( Delta servo motor driver software) was running. The motor is controlled by the software while the channel was sniffing by Device Monitoring Studio version 7.73. In this way the set of all required commands are found and hard coded them in this API. </p><dl class="section note"><dt>Note</dt><dd>based on device specifications befor and after transmission 10ms of scilence in channel is required. </dd>
<dd>
all operations are based on modebus command code 16 (0x10). </dd>
<dd>
there is JUST one slave with address 127.</dd></dl>
<a class="anchor" id="example command"></a>
<table class="doxtable">
<caption>Delta Servo motor example</caption>
<tr>
<th>Description </th><th>Byte one </th><th>Byte two </th></tr>
<tr>
<td>slave address </td><td>0X01 </td><td>- </td></tr>
<tr>
<td>function </td><td>0x10 </td><td>- </td></tr>
<tr>
<td>starting data address </td><td>0X01(high) </td><td>0x12(low) </td></tr>
<tr>
<td>number of data (in word) </td><td>0x00(high) </td><td>0x02(low) </td></tr>
<tr>
<td>number of data (in byte) </td><td>0x04 </td><td>- </td></tr>
<tr>
<td>content of 1st data </td><td>0x0B(high) </td><td>0xB8(low) </td></tr>
<tr>
<td>content of 2st data </td><td>0x00(high) </td><td>0x00(low) </td></tr>
<tr>
<td>CRC </td><td>0xFC (low) </td><td>0xEB (high) </td></tr>
</table>
<p>The complete list of commands is shown in the following table: </p><a class="anchor" id="DeltaServoFormat"></a>
<table class="doxtable">
<caption>Command sets</caption>
<tr>
<th>command </th><th>address </th><th>function code </th><th>start address </th><th>#word </th><th>#bytes </th><th>bytes </th><th>CRC </th></tr>
<tr>
<td>TURN ON MOTOR </td><td>0x7F </td><td>0x10 </td><td>0X02 0X3C </td><td>0X00 0X02 </td><td>0X04 </td><td>0X00 0X01 0X00 0X00 </td><td>0X26 0X67 </td></tr>
<tr>
<td>TURN OFF MOTOR </td><td>0x7F </td><td>0x10 </td><td>0X02 0X3C </td><td>0X00 0X02 </td><td>0X04 </td><td>0X00 0X00 0X00 0X00 </td><td>0X77 0XA7 </td></tr>
<tr>
<td>SPEED 100 </td><td>0x7F </td><td>0x10 </td><td>0X04 0X0A </td><td>0X00 0X02 </td><td>0X04 </td><td>0X00 0X64 0X00 0X00 </td><td>0X9E 0XE6 </td></tr>
<tr>
<td>ROTATE CCW </td><td>0x7F </td><td>0x10 </td><td>0X04 0X0A </td><td>0X00 0X02 </td><td>0X04 </td><td>0X13 0X86 0X00 0X00 </td><td>0X3A 0X54 </td></tr>
<tr>
<td>ROTATE CW </td><td>0x7F </td><td>0x10 </td><td>0X04 0X0A </td><td>0X00 0X02 </td><td>0X04 </td><td>0X13 0X87 0X00 0X00 </td><td>0X6B 0X94 </td></tr>
<tr>
<td>STOP ROTATION </td><td>0x7F </td><td>0x10 </td><td>0X04 0X0A </td><td>0X00 0X02 </td><td>0X04 </td><td>0X00 0X00 0X00 0X00 </td><td>0XDF 0X39 </td></tr>
</table>
<dl class="section note"><dt>Note</dt><dd>before and after transmission 10ms of scilence is needed.</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Altay Brusan </dd></dl>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
